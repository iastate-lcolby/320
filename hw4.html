<p>Input:<br><textarea id="input" rows="10" cols="80"></textarea>
<p><button onclick="process()">Process</button>
<p>Output:<br><textarea id="output" rows="10" cols="80"></textarea>

<script>

function process() 
{
  x = document.getElementById("input").value
 
  x = x.replace(/\W+/g, " ").toLowerCase().trim() 

words = x.split("")
counts = {}

for(i=0; i<words.length; i++)
{
	if(!counts[words[i]])
	{
		counts[words[i]] = 1
	}
	
	else
	{
		counts[words[i]] ++ 
	}

  y = JSON.stringify(counts, null, 2)
  
  sorted = Object.keys(counts).sort(function(a,b)(return counts[b]-counts[a]))
  y += sorted
  
   
  document.getElementById("output").value = y
}

</script>
</script>